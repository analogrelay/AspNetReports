<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Shared CSS Styles-->

    <style>
        .small-avatar {
            width: 20px;
            height: 20px;
        }

        .contributor-card {
            max-width: 15%;
        }
    </style>
    <title>KCore Status Report (2019-06-21)</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/">ASP.NET Core Reports</a>
    </nav>
    <div class="container pt-5">
        <h1>KCore Status Report (2019-06-21)</h1>

        <h2 class="pt-2">Overview</h2>

<p>We made significant progress on preview 7 this week. Not quite making feature complete by the end of this week, but major items are done.</p>
<p>Community Contributions this week:</p>
<ul>
<li><a href="https://github.com/BalintFarkas">Balint Farkas</a> added some tests to an earlier SignalR contribution he made.</li>
</ul>
<p>Just <em>some</em> of the work our team has been doing:</p>
<ul>
<li>We've been hard at work cleaning up after the Arcade migration, making sure disabled tests get re-enabled and build races are sorted out.</li>
<li>We taught the Java SignalR Client how to call server methods with no return value and still wait for the method to complete.</li>
<li>We cleaned up a bunch of pubternal APIs and refined other public APIs in SignalR.</li>
<li>We taught the JavaScript SignalR Client how to fallback through transports without unneccessary renegotiation with the server.</li>
<li>We updated the SignalR .NET Client's EventCounters to match the new format and patterns.</li>
<li>We continued API clean-up in Kestrel and converted the existing "Connection Adaptors" to use the new Bedrock "Connection Middleware" concepts.</li>
<li>We updated our platform components (runtime and targeting pack) to include the correct manifests.</li>
<li>We updated Facebook Authentication components to react to recent changes to the Facebook API.</li>
<li>We added features to allow gRPC to control HTTP/2 stream error codes.</li>
<li>We <em>finally</em> knocked down a race in Kestrel's pipe writer... for real this time, trust us.</li>
</ul>
<p>Work still ahead:</p>
<ul>
<li>Adopting the new Bedrock Client abstractions in the SignalR client.</li>
<li>Restoring SignalR functional tests after the Arcade migrations.</li>
<li>Providing a proper "resource" to authorization handlers when authorizing access to a specific SignalR hub method.</li>
<li>Reacting to some last changes in the .NET Core host in ANCM to ensure we can load the runtime effectively.</li>
</ul>
<p>Moving forward we're going to start looking in to some larger infrastructure issues, as we wind down our 3.0 work.</p>

        <h2 class="pt-2">Important Dates</h2>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Milestone</th>
                    <th scope="col">Branch Closes</th>
                    <th scope="col">Work Days Remaining</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row">3.0.0-preview7</th>
                    <td>2019-07-01</td>
                    <td>7</td>
                </tr>
            </tbody>
        </table>

        <h2 class="pt-2">External Contributors</h2>
        <p>Thanks to all our external contributors this week!</p>

        <div class="card-deck">
            <div class="card contributor-card">
                <img class="card-img-top" src="https://avatars1.githubusercontent.com/u/11557213?v=4" alt="Balint Farkas (BalintFarkas)">
                <div class="card-body">
                    <h5 class="card-title">
                        Balint Farkas (BalintFarkas)
                    </h5>
                </div>
            </div>
        </div>

        <h2 class="pt-2">PRs Merged</h2>

        <div class="row">
            <div class="col-4">
                <div id="pr-list" class="list-group" role="tablist">
                    <a href="#pr-content-for-BalintFarkas" class="list-group-item list-group-item-action"
                        id="pr-list-item-for-BalintFarkas" data-toggle="list" role="tab" aria-controls="BalintFarkas">
                        <img class="small-avatar" src="https://avatars1.githubusercontent.com/u/11557213?v=4" /> Balint Farkas (BalintFarkas) <span
                            class="badge badge-primary">External</span>
                    </a>
                    <a href="#pr-content-for-mikaelm12" class="list-group-item list-group-item-action"
                        id="pr-list-item-for-mikaelm12" data-toggle="list" role="tab" aria-controls="mikaelm12">
                        <img class="small-avatar" src="https://avatars1.githubusercontent.com/u/4809660?v=4" /> Mikael Mengistu (mikaelm12)
                    </a>
                    <a href="#pr-content-for-BrennanConroy" class="list-group-item list-group-item-action"
                        id="pr-list-item-for-BrennanConroy" data-toggle="list" role="tab" aria-controls="BrennanConroy">
                        <img class="small-avatar" src="https://avatars0.githubusercontent.com/u/7574801?v=4" /> Brennan (BrennanConroy)
                    </a>
                    <a href="#pr-content-for-anurse" class="list-group-item list-group-item-action"
                        id="pr-list-item-for-anurse" data-toggle="list" role="tab" aria-controls="anurse">
                        <img class="small-avatar" src="https://avatars3.githubusercontent.com/u/7574?v=4" /> Andrew Stanton-Nurse (anurse)
                    </a>
                    <a href="#pr-content-for-davidfowl" class="list-group-item list-group-item-action"
                        id="pr-list-item-for-davidfowl" data-toggle="list" role="tab" aria-controls="davidfowl">
                        <img class="small-avatar" src="https://avatars3.githubusercontent.com/u/95136?v=4" /> David Fowler (davidfowl)
                    </a>
                    <a href="#pr-content-for-jkotalik" class="list-group-item list-group-item-action"
                        id="pr-list-item-for-jkotalik" data-toggle="list" role="tab" aria-controls="jkotalik">
                        <img class="small-avatar" src="https://avatars0.githubusercontent.com/u/8302101?v=4" /> Justin Kotalik (jkotalik)
                    </a>
                    <a href="#pr-content-for-Tratcher" class="list-group-item list-group-item-action"
                        id="pr-list-item-for-Tratcher" data-toggle="list" role="tab" aria-controls="Tratcher">
                        <img class="small-avatar" src="https://avatars3.githubusercontent.com/u/1821173?v=4" /> Chris Ross (Tratcher)
                    </a>
                    <a href="#pr-content-for-halter73" class="list-group-item list-group-item-action"
                        id="pr-list-item-for-halter73" data-toggle="list" role="tab" aria-controls="halter73">
                        <img class="small-avatar" src="https://avatars3.githubusercontent.com/u/54385?v=4" /> Stephen Halter (halter73)
                    </a>
                </div>
            </div>
            <div class="col-8">
                <div class="tab-content" id="pr-content">
                    <div class="tab-pane fade" id="pr-content-for-BalintFarkas" role="tabpanel"
                        aria-labelledby="pr-list-item-for-BalintFarkas">
                        <ul>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11140" target="_blank"><strong>aspnet/AspNetCore#11140</strong>
                                    Added CanCancelStartingConnectionAfterNegotiate (#10432)</a>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-pane fade" id="pr-content-for-mikaelm12" role="tabpanel"
                        aria-labelledby="pr-list-item-for-mikaelm12">
                        <ul>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11399" target="_blank"><strong>aspnet/AspNetCore#11399</strong>
                                    Add Invoke API with with no completion result</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11356" target="_blank"><strong>aspnet/AspNetCore#11356</strong>
                                    Make SSEMessageFormatter internal and use new InternalsVisibleTo pattern</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11272" target="_blank"><strong>aspnet/AspNetCore#11272</strong>
                                    Allow sending a Single null arg in Java client</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11162" target="_blank"><strong>aspnet/AspNetCore#11162</strong>
                                    Clean up Pubternal Types in SignalR</a>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-pane fade" id="pr-content-for-BrennanConroy" role="tabpanel"
                        aria-labelledby="pr-list-item-for-BrennanConroy">
                        <ul>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11382" target="_blank"><strong>aspnet/AspNetCore#11382</strong>
                                    Pass options to HubConnectionContext</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11330" target="_blank"><strong>aspnet/AspNetCore#11330</strong>
                                    Update dev deps for SignalR</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11241" target="_blank"><strong>aspnet/AspNetCore#11241</strong>
                                    Allow null arguments from HubConnection</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11191" target="_blank"><strong>aspnet/AspNetCore#11191</strong>
                                    [TS] Remove extra negotiates from common scenarios</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11130" target="_blank"><strong>aspnet/AspNetCore#11130</strong>
                                    Convert SignalR EventSource usage to new pattern</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11398" target="_blank"><strong>aspnet/AspNetCore#11398</strong>
                                    Temporarily skip SignalR TS client tests</a>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-pane fade" id="pr-content-for-anurse" role="tabpanel"
                        aria-labelledby="pr-list-item-for-anurse">
                        <ul>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11420" target="_blank"><strong>aspnet/AspNetCore#11420</strong>
                                    Quarantine some tests</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11123" target="_blank"><strong>aspnet/AspNetCore#11123</strong>
                                    fix #11114 by setting DesignerCategory for WebHostService</a>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-pane fade" id="pr-content-for-davidfowl" role="tabpanel"
                        aria-labelledby="pr-list-item-for-davidfowl">
                        <ul>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11412" target="_blank"><strong>aspnet/AspNetCore#11412</strong>
                                    Remove connection adapters and move things to middleware</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11257" target="_blank"><strong>aspnet/AspNetCore#11257</strong>
                                    Kestrel API clean up based on review</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11256" target="_blank"><strong>aspnet/AspNetCore#11256</strong>
                                    [Flaky test fix]: Wait for server connection to end</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11215" target="_blank"><strong>aspnet/AspNetCore#11215</strong>
                                    Move TransportConnection to shared source</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11358" target="_blank"><strong>aspnet/AspNetCore#11358</strong>
                                    Increase timeout to 30 seconds</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11211" target="_blank"><strong>aspnet/AspNetCore#11211</strong>
                                    Hoist activity fields to the logging scope</a>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-pane fade" id="pr-content-for-jkotalik" role="tabpanel"
                        aria-labelledby="pr-list-item-for-jkotalik">
                        <ul>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11394" target="_blank"><strong>aspnet/AspNetCore#11394</strong>
                                    Remove copy race for IIS projects</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11199" target="_blank"><strong>aspnet/AspNetCore#11199</strong>
                                    Always include ANCM in build output</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11198" target="_blank"><strong>aspnet/AspNetCore#11198</strong>
                                    Always include ANCM in build output</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11109" target="_blank"><strong>aspnet/AspNetCore#11109</strong>
                                    Convert TLS connection adapter to connection middleware</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11355" target="_blank"><strong>aspnet/AspNetCore#11355</strong>
                                    Skip CORS tests</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11306" target="_blank"><strong>aspnet/AspNetCore#11306</strong>
                                    Mark test as flaky</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11297" target="_blank"><strong>aspnet/AspNetCore#11297</strong>
                                    Reduce logging branch path size.</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11235" target="_blank"><strong>aspnet/AspNetCore#11235</strong>
                                    Add file manifest for runtime and targeting pack</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11063" target="_blank"><strong>aspnet/AspNetCore#11063</strong>
                                    Make CORS functional tests select different ports</a>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-pane fade" id="pr-content-for-Tratcher" role="tabpanel"
                        aria-labelledby="pr-list-item-for-Tratcher">
                        <ul>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11300" target="_blank"><strong>aspnet/AspNetCore#11300</strong>
                                    Implement IHttpResetFeature in Kestrel</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11193" target="_blank"><strong>aspnet/AspNetCore#11193</strong>
                                    Implement Http/2 CompleteAsync</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11238" target="_blank"><strong>aspnet/AspNetCore#11238</strong>
                                     Update facebook APIs to v3.3</a>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-pane fade" id="pr-content-for-halter73" role="tabpanel"
                        aria-labelledby="pr-list-item-for-halter73">
                        <ul>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11294" target="_blank"><strong>aspnet/AspNetCore#11294</strong>
                                    The TaskCompletionSource ctor takes Task*Creation*Options</a>
                            </li>
                            <li><a href="https://github.com/aspnet/AspNetCore/pull/11065" target="_blank"><strong>aspnet/AspNetCore#11065</strong>
                                    Work around potential race in PipeWriter Redux</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <h3 class="pt-2">Active Issues</h3>

        <strong>Closed</strong> refers to issues that are closed but do not have the <code>accepted</code> label
        applied.
        <strong>Incomplete</strong> is the total of both <strong>Closed</strong> and <strong>Open</strong>.

        <table class="table">
            <thead>
                <th scope="col">Area</th>
                <th scope="col">Open</th>
                <th scope="col">Closed</th>
                <th scope="col">Incomplete</th>
                <th scope="col">Accepted</th>
            </thead>
            <tbody>
                <tr>
                    <th scope="row"><code>area-signalr</code></th>
                    <td>5</td>
                    <td>15</td>
                    <td>20</td>
                    <td>1</td>
                </tr>
                <tr>
                    <th scope="row"><code>area-servers</code></th>
                    <td>7</td>
                    <td>18</td>
                    <td>25</td>
                    <td>0</td>
                </tr>
                <tr>
                    <th scope="row"><code>area-hosting</code></th>
                    <td>1</td>
                    <td>3</td>
                    <td>4</td>
                    <td>1</td>
                </tr>
                <tr class="table-info">
                    <th scope="row">Total</th>
                    <td>13</td>
                    <td>36</td>
                    <td>49</td>
                    <td>2</td>
                </tr>
            </tbody>
        </table>

        <h3 class="pt-2">Burndown</h3>

        <canvas id="burndown-chart-host"></canvas>

        <table class="table">
            <thead>
                <th scope="col">Date</th>
                <th scope="col">area-hosting</th>
                <th scope="col">area-servers</th>
                <th scope="col">area-signalr</th>
            </thead>
            <tbody>
                <tr>
                    <td scope="row"><strong>2019-06-14</strong></td>
                    <td>1</td>
                    <td>11</td>
                    <td>7</td>
                </tr>
                <tr>
                    <td scope="row"><strong>2019-06-21</strong></td>
                    <td>1</td>
                    <td>7</td>
                    <td>5</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"
        integrity="sha256-xKeoJ50pzbUGkpQxDYHD7o7hxe0LaOGeguUidbq6vis=" crossorigin="anonymous"></script>

    <script>
        // Raw Burndown Data
        window.burndownData = {
            areas: [
                "area-hosting",
                "area-servers",
                "area-signalr",
            ],
            weeks: [
                {
                    week: "2019-06-14",
                    areas: [
                        { label: "area-hosting", open: 1 },
                        { label: "area-servers", open: 11 },
                        { label: "area-signalr", open: 7 },
                    ],
                },
                {
                    week: "2019-06-21",
                    areas: [
                        { label: "area-hosting", open: 1 },
                        { label: "area-servers", open: 7 },
                        { label: "area-signalr", open: 5 },
                    ],
                },
            ]
        };
    </script>

<script type="text/javascript">
var chartColors = [
    /* blue */ 'rgb(54, 162, 235)',
    /* yellow */ 'rgb(255, 205, 86)',
    /* orange */ 'rgb(255, 159, 64)',
    /* green */ 'rgb(75, 192, 192)',
    /* purple */ 'rgb(153, 102, 255)',
    /* red */ 'rgb(255, 99, 132)',
];

function renderBurndown(host, burndownData) {
    var lineData = [];
    var barDataSets = [];
    var counter = 0;
    for (var area of burndownData.areas) {
        var areaData = [];
        for (var week of burndownData.weeks) {
            var weekArea = week.areas.find(a => a.label === area);
            areaData.push(weekArea.open);
        }

        barDataSets.unshift({
            label: area,
            backgroundColor: chartColors[counter % chartColors.length],
            data: areaData,
            stack: "Stack 0"
        });
        counter += 1;
    }

    for (var week of burndownData.weeks) {
        var count = 0;
        for (var area of week.areas) {
            count += area.open
        }
        lineData.push(count);
    }

    var labels = burndownData.weeks.map(w => w.week);

    var chart = new Chart(host, {
        type: "bar",
        data: {
            labels: labels,
            datasets: [
                {
                    label: "All Issues",
                    data: lineData,
                    borderColor: 'rgb(201, 203, 207)',
                    backgroundColor: 'rgba(255, 255, 255, 0)',
                    type: 'line'
                },
                ...barDataSets
            ]
        }
    });
}

// Expect the data to be present in window.burndownData
if (typeof window.burndownData !== "object") {
    console.error("Missing burndown data!");
} else {
    var host = document.getElementById("burndown-chart-host");
    if (!host) {
        console.error("Missing burndown chart host!");
    }
    else {
        renderBurndown(host, window.burndownData);
    }
}
</script>
</body>

</html>